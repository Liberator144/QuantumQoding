#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Ultimate TypeScript Sovereignty Protection
# This is the most comprehensive JavaScript prevention system

echo "ğŸ” ULTIMATE QUANTUM SAFEGUARD SCAN"
echo "======================================"

# Count all JavaScript files (excluding allowed directories)
JS_COUNT=$(find . -name "*.js" -o -name "*.jsx" | grep -v node_modules | grep -v dist | grep -v build | grep -v \.backup | grep -v \.husky | wc -l)

echo "JavaScript files detected: $JS_COUNT"

if [ $JS_COUNT -gt 0 ]; then
  echo ""
  echo "âŒ QUANTUM BREACH DETECTED!"
  echo "âŒ TypeScript Sovereignty VIOLATED!"
  echo "âŒ COMMIT BLOCKED by Ultimate Safeguard"
  echo ""
  echo "JavaScript files found:"
  find . -name "*.js" -o -name "*.jsx" | grep -v node_modules | grep -v dist | grep -v build | grep -v \.backup | grep -v \.husky
  echo ""
  echo "ğŸ›¡ï¸  SOLUTION: Migrate all JavaScript files to TypeScript"
  echo "ğŸ›¡ï¸  Use: .js â†’ .ts and .jsx â†’ .tsx"
  echo "ğŸ›¡ï¸  Quantum Coherence MUST be maintained"
  echo ""
  exit 1
fi

echo "âœ… Quantum Coherence: MAINTAINED"
echo "âœ… TypeScript Sovereignty: PROTECTED"
echo "âœ… Ultimate Safeguard: PASSED"
echo "ğŸš€ Commit approved by Quantum Protection System"